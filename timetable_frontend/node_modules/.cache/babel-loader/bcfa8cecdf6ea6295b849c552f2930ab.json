{"ast":null,"code":"\"use strict\";\n\nvar util = require('./util');\n\nvar encodeImageAsDataURI = function (image, options) {\n  var url = null;\n\n  if (image.hasAttribute('src')) {\n    url = image.getAttribute('src');\n  } else if (image.hasAttributeNS('http://www.w3.org/1999/xlink', 'href')) {\n    url = image.getAttributeNS('http://www.w3.org/1999/xlink', 'href');\n  } else if (image.hasAttribute('href')) {\n    url = image.getAttribute('href');\n  }\n\n  var documentBase = util.getDocumentBaseUrl(image.ownerDocument),\n      ajaxOptions = util.clone(options);\n\n  if (!ajaxOptions.baseUrl && documentBase) {\n    ajaxOptions.baseUrl = documentBase;\n  }\n\n  return util.getDataURIForImageURL(url, ajaxOptions).then(function (dataURI) {\n    return dataURI;\n  }, function (e) {\n    throw {\n      resourceType: \"image\",\n      url: e.url,\n      msg: \"Unable to load image \" + e.url\n    };\n  });\n};\n\nvar filterExternalImages = function (images) {\n  return images.filter(function (image) {\n    var url = null;\n\n    if (image.hasAttribute('src')) {\n      url = image.getAttribute('src');\n    } else if (image.hasAttributeNS('http://www.w3.org/1999/xlink', 'href')) {\n      url = image.getAttributeNS('http://www.w3.org/1999/xlink', 'href');\n    } else if (image.hasAttribute('href')) {\n      url = image.getAttribute('href');\n    }\n\n    return url !== null && !util.isDataUri(url);\n  });\n};\n\nvar filterInputsForImageType = function (inputs) {\n  return Array.prototype.filter.call(inputs, function (input) {\n    return input.type === \"image\";\n  });\n};\n\nvar toArray = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike);\n};\n\nexports.inline = function (doc, options) {\n  var images = toArray(doc.getElementsByTagName(\"img\")),\n      svgImages = toArray(doc.getElementsByTagName(\"image\")),\n      imageInputs = filterInputsForImageType(doc.getElementsByTagName(\"input\"));\n  images = images.concat(svgImages);\n  images = images.concat(imageInputs);\n  var externalImages = filterExternalImages(images);\n  return util.collectAndReportErrors(externalImages.map(function (image) {\n    return encodeImageAsDataURI(image, options).then(function (dataURI) {\n      if (!!image.attributes.src) {\n        image.attributes.src.value = dataURI;\n      } else if (!!image.attributes['xlink:href']) {\n        image.attributes['xlink:href'].value = dataURI;\n      } else if (!!image.attributes.href) {\n        image.attributes.href.value = dataURI;\n      }\n    });\n  }));\n};","map":{"version":3,"sources":["D:/act-back original/timetable_frontend/node_modules/inlineresources/src/inlineImage.js"],"names":["util","require","encodeImageAsDataURI","image","options","url","hasAttribute","getAttribute","hasAttributeNS","getAttributeNS","documentBase","getDocumentBaseUrl","ownerDocument","ajaxOptions","clone","baseUrl","getDataURIForImageURL","then","dataURI","e","resourceType","msg","filterExternalImages","images","filter","isDataUri","filterInputsForImageType","inputs","Array","prototype","call","input","type","toArray","arrayLike","slice","exports","inline","doc","getElementsByTagName","svgImages","imageInputs","concat","externalImages","collectAndReportErrors","map","attributes","src","value","href"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar util = require('./util');\n\n\nvar encodeImageAsDataURI = function (image, options) {\n    var url = null;\n    if(image.hasAttribute('src')){\n        url = image.getAttribute('src');\n    }\n    else if(image.hasAttributeNS('http://www.w3.org/1999/xlink','href')){\n        url = image.getAttributeNS('http://www.w3.org/1999/xlink','href');\n    }\n    else if(image.hasAttribute('href')){\n        url = image.getAttribute('href');\n    }\n    var documentBase = util.getDocumentBaseUrl(image.ownerDocument),\n        ajaxOptions = util.clone(options);\n\n    if (!ajaxOptions.baseUrl && documentBase) {\n        ajaxOptions.baseUrl = documentBase;\n    }\n\n    return util.getDataURIForImageURL(url, ajaxOptions)\n        .then(function (dataURI) {\n            return dataURI;\n        }, function (e) {\n            throw {\n                resourceType: \"image\",\n                url: e.url,\n                msg: \"Unable to load image \" + e.url\n            };\n        });\n};\n\nvar filterExternalImages = function (images) {\n    return images.filter(function (image) {\n        var url = null;\n        if(image.hasAttribute('src')){\n            url = image.getAttribute('src');\n        }\n        else if(image.hasAttributeNS('http://www.w3.org/1999/xlink','href')){\n            url = image.getAttributeNS('http://www.w3.org/1999/xlink','href');\n        }\n        else if(image.hasAttribute('href')){\n            url = image.getAttribute('href');\n        }\n\n        return url !== null && !util.isDataUri(url);\n    });\n};\n\nvar filterInputsForImageType = function (inputs) {\n    return Array.prototype.filter.call(inputs, function (input) {\n        return input.type === \"image\";\n    });\n};\n\nvar toArray = function (arrayLike) {\n    return Array.prototype.slice.call(arrayLike);\n};\n\nexports.inline = function (doc, options) {\n    var images = toArray(doc.getElementsByTagName(\"img\")),\n        svgImages = toArray(doc.getElementsByTagName(\"image\")),\n        imageInputs = filterInputsForImageType(doc.getElementsByTagName(\"input\"));\n\n    images = images.concat(svgImages);\n    images = images.concat(imageInputs);\n    var externalImages = filterExternalImages(images);\n\n    return util.collectAndReportErrors(externalImages.map(function (image) {\n        return encodeImageAsDataURI(image, options).then(function (dataURI) {\n            if(!!image.attributes.src){\n                image.attributes.src.value = dataURI;\n            }\n            else if(!!image.attributes['xlink:href']){\n                image.attributes['xlink:href'].value = dataURI;\n            }\n            else if(!!image.attributes.href){\n                image.attributes.href.value = dataURI;\n            }\n        });\n    }));\n};\n"]},"metadata":{},"sourceType":"script"}