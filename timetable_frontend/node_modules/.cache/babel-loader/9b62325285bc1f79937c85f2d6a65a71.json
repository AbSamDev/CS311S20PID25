{"ast":null,"code":"\"use strict\";\n\nvar util = require('./util');\n\nvar loadLinkedScript = function (script, options) {\n  var src = script.attributes.src.value,\n      documentBase = util.getDocumentBaseUrl(script.ownerDocument),\n      ajaxOptions = util.clone(options);\n\n  if (!ajaxOptions.baseUrl && documentBase) {\n    ajaxOptions.baseUrl = documentBase;\n  }\n\n  return util.ajax(src, ajaxOptions).catch(function (e) {\n    throw {\n      resourceType: \"script\",\n      url: e.url,\n      msg: \"Unable to load script \" + e.url\n    };\n  });\n};\n\nvar escapeClosingTags = function (text) {\n  // http://stackoverflow.com/questions/9246382/escaping-script-tag-inside-javascript\n  return text.replace(/<\\//g, '<\\\\/');\n};\n\nvar substituteExternalScriptWithInline = function (scriptNode, jsCode) {\n  scriptNode.attributes.removeNamedItem('src');\n  scriptNode.textContent = escapeClosingTags(jsCode);\n};\n\nvar getScripts = function (doc) {\n  var scripts = doc.getElementsByTagName(\"script\");\n  return Array.prototype.filter.call(scripts, function (script) {\n    return !!script.attributes.src;\n  });\n};\n\nexports.inline = function (doc, options) {\n  var scripts = getScripts(doc);\n  return util.collectAndReportErrors(scripts.map(function (script) {\n    return loadLinkedScript(script, options).then(function (jsCode) {\n      substituteExternalScriptWithInline(script, jsCode);\n    });\n  }));\n};","map":{"version":3,"sources":["D:/act-back original/timetable_frontend/node_modules/inlineresources/src/inlineScript.js"],"names":["util","require","loadLinkedScript","script","options","src","attributes","value","documentBase","getDocumentBaseUrl","ownerDocument","ajaxOptions","clone","baseUrl","ajax","catch","e","resourceType","url","msg","escapeClosingTags","text","replace","substituteExternalScriptWithInline","scriptNode","jsCode","removeNamedItem","textContent","getScripts","doc","scripts","getElementsByTagName","Array","prototype","filter","call","exports","inline","collectAndReportErrors","map","then"],"mappings":"AAAA;;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,QAAD,CAAlB;;AAGA,IAAIC,gBAAgB,GAAG,UAAUC,MAAV,EAAkBC,OAAlB,EAA2B;AAC9C,MAAIC,GAAG,GAAGF,MAAM,CAACG,UAAP,CAAkBD,GAAlB,CAAsBE,KAAhC;AAAA,MACIC,YAAY,GAAGR,IAAI,CAACS,kBAAL,CAAwBN,MAAM,CAACO,aAA/B,CADnB;AAAA,MAEIC,WAAW,GAAGX,IAAI,CAACY,KAAL,CAAWR,OAAX,CAFlB;;AAIA,MAAI,CAACO,WAAW,CAACE,OAAb,IAAwBL,YAA5B,EAA0C;AACtCG,IAAAA,WAAW,CAACE,OAAZ,GAAsBL,YAAtB;AACH;;AAED,SAAOR,IAAI,CAACc,IAAL,CAAUT,GAAV,EAAeM,WAAf,EACFI,KADE,CACI,UAAUC,CAAV,EAAa;AAChB,UAAM;AACFC,MAAAA,YAAY,EAAE,QADZ;AAEFC,MAAAA,GAAG,EAAEF,CAAC,CAACE,GAFL;AAGFC,MAAAA,GAAG,EAAE,2BAA2BH,CAAC,CAACE;AAHhC,KAAN;AAKH,GAPE,CAAP;AAQH,CAjBD;;AAmBA,IAAIE,iBAAiB,GAAG,UAAUC,IAAV,EAAgB;AACpC;AACA,SAAOA,IAAI,CAACC,OAAL,CAAa,MAAb,EAAqB,MAArB,CAAP;AACH,CAHD;;AAKA,IAAIC,kCAAkC,GAAG,UAAUC,UAAV,EAAsBC,MAAtB,EAA8B;AACnED,EAAAA,UAAU,CAAClB,UAAX,CAAsBoB,eAAtB,CAAsC,KAAtC;AACAF,EAAAA,UAAU,CAACG,WAAX,GAAyBP,iBAAiB,CAACK,MAAD,CAA1C;AACH,CAHD;;AAKA,IAAIG,UAAU,GAAG,UAAUC,GAAV,EAAe;AAC5B,MAAIC,OAAO,GAAGD,GAAG,CAACE,oBAAJ,CAAyB,QAAzB,CAAd;AAEA,SAAOC,KAAK,CAACC,SAAN,CAAgBC,MAAhB,CAAuBC,IAAvB,CAA4BL,OAA5B,EAAqC,UAAU3B,MAAV,EAAkB;AAC1D,WAAO,CAAC,CAACA,MAAM,CAACG,UAAP,CAAkBD,GAA3B;AACH,GAFM,CAAP;AAGH,CAND;;AAQA+B,OAAO,CAACC,MAAR,GAAiB,UAAUR,GAAV,EAAezB,OAAf,EAAwB;AACrC,MAAI0B,OAAO,GAAGF,UAAU,CAACC,GAAD,CAAxB;AAEA,SAAO7B,IAAI,CAACsC,sBAAL,CAA4BR,OAAO,CAACS,GAAR,CAAY,UAAUpC,MAAV,EAAkB;AAC7D,WAAOD,gBAAgB,CAACC,MAAD,EAASC,OAAT,CAAhB,CAAkCoC,IAAlC,CAAuC,UAAUf,MAAV,EAAkB;AAC5DF,MAAAA,kCAAkC,CAACpB,MAAD,EAASsB,MAAT,CAAlC;AACH,KAFM,CAAP;AAGH,GAJkC,CAA5B,CAAP;AAKH,CARD","sourcesContent":["\"use strict\";\n\nvar util = require('./util');\n\n\nvar loadLinkedScript = function (script, options) {\n    var src = script.attributes.src.value,\n        documentBase = util.getDocumentBaseUrl(script.ownerDocument),\n        ajaxOptions = util.clone(options);\n\n    if (!ajaxOptions.baseUrl && documentBase) {\n        ajaxOptions.baseUrl = documentBase;\n    }\n\n    return util.ajax(src, ajaxOptions)\n        .catch(function (e) {\n            throw {\n                resourceType: \"script\",\n                url: e.url,\n                msg: \"Unable to load script \" + e.url\n            };\n        });\n};\n\nvar escapeClosingTags = function (text) {\n    // http://stackoverflow.com/questions/9246382/escaping-script-tag-inside-javascript\n    return text.replace(/<\\//g, '<\\\\/');\n};\n\nvar substituteExternalScriptWithInline = function (scriptNode, jsCode) {\n    scriptNode.attributes.removeNamedItem('src');\n    scriptNode.textContent = escapeClosingTags(jsCode);\n};\n\nvar getScripts = function (doc) {\n    var scripts = doc.getElementsByTagName(\"script\");\n\n    return Array.prototype.filter.call(scripts, function (script) {\n        return !!script.attributes.src;\n    });\n};\n\nexports.inline = function (doc, options) {\n    var scripts = getScripts(doc);\n\n    return util.collectAndReportErrors(scripts.map(function (script) {\n        return loadLinkedScript(script, options).then(function (jsCode) {\n            substituteExternalScriptWithInline(script, jsCode);\n        });\n    }));\n};\n"]},"metadata":{},"sourceType":"script"}